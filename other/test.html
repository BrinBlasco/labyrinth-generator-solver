<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>
        body{
            display: flex;
            justify-content: center;
        }

        #canvas1 {
            z-index: 99;
            position: absolute;
        }
    </style>
</head>
<body>
    <canvas id="canvas" width="500" height="500"></canvas>
    <canvas id="canvas1" width="500" height="500"></canvas>
<script>
    // const canvas = document.getElementById("canvas");
    // const canvas1 = document.getElementById("canvas1");

    // const ctx = canvas.getContext("2d");
    // const ctx1 = canvas1.getContext("2d");

    // let square = { x: 50, y: 50, w: 50, isDragging: false };


    // function drawLine(ctx, xc, yc, xd, yd){
    //     ctx.beginPath();
    //     ctx.moveTo(xc, yc);
    //     ctx.lineTo(xd, yd);
    //     ctx.stroke();
    //     ctx.closePath();
    // }

    // document.addEventListener("DOMContentLoaded", () => {
    //     for(let i = 0; i <= canvas.width; i+=50){
    //         drawLine(ctx1, i, -1, i, canvas.width);
    //         drawLine(ctx1, -1, i, canvas.width, i);    
    //     }
    // })

    // function draw() {
    //     ctx.clearRect(0, 0, canvas.width, canvas.height);
    //     ctx.fillStyle = "blue";
    //     ctx.fillRect(square.x, square.y, square.w, square.w);
    // }

    // draw();

    // const startDragging = (e) => {
    //     const { offsetX, offsetY } = e;
    //     if (
    //         offsetX >= square.x 
    //             &&
    //         offsetX <= square.x + square.w 
    //             &&
    //         offsetY >= square.y 
    //             &&
    //         offsetY <= square.y + square.w
    //     ) {
    //         square.isDragging = true;
    //     }
    // };

    // const stopDragging = () => {
    //     square.isDragging = false;
    // };

    // const moveSquare = (e) => {
    //     let bounds = e.target.getBoundingClientRect();

    //     if (
    //         square.isDragging 
    //         && 
    //         ( 
    //             (
    //                 e.offsetX < bounds.width 
    //                     && 
    //                 e.offsetY < bounds.height
    //             )
    //                 && 
    //             (
    //                 e.offsetX > 0 
    //                     && 
    //                 e.offsetY > 0
    //             )
    //         )
    //     ) {    
    //         console.log(bounds.width, bounds.height); 
    //         let x = e.clientX - bounds.left;
    //         let y = e.clientY - bounds.top;

    //         let row = Math.ceil(y / 50) - 1;
    //         let col = Math.ceil(x / 50 ) - 1;

    //         //lastClickedPosition = column + row * 10; 
    //         ctx.fillStyle = "blue";
    //         ctx.clearRect(square.x, square.y, square.w, square.w);

    //         square.x = col * 50;
    //         square.y = row * 50;

    //         ctx.fillRect(square.x, square.y, square.w, square.w);
    //     }        
    // };

    // canvas.onmousedown = startDragging;
    // canvas.onmousemove = moveSquare;

    // canvas.onmouseup = stopDragging;
    // canvas.onmouseleave = stopDragging;

</script>
<script src="./js/Dragging.js"></script>
<script>
    const canvas = document.getElementById("canvas");
    const canvas1 = document.getElementById("canvas1");

    const ctx = canvas.getContext("2d");
    const ctx1 = canvas1.getContext("2d");

    function drawLine(ctx, xc, yc, xd, yd){
        ctx.beginPath();
        ctx.moveTo(xc, yc);
        ctx.lineTo(xd, yd);
        ctx.stroke();
        ctx.closePath();
    }

    function sleep(ms){
        const start = performance.now();
        while(performance.now() - start < ms){

        }
    }

    document.addEventListener("DOMContentLoaded", () => {
        for(let i = 0; i <= canvas.width; i+=50){
            drawLine(ctx, i, 0, i, canvas.width);
            drawLine(ctx, 0, i, canvas.width, i);    
        }
    })
    
    const squareManager = new SquareManager(ctx1, 50, 10, 10);

    squareManager.addSquare(0);
    //squareManager.addSquare(99);

    squareManager.enableDragging();

</script>
</body>
</html>


